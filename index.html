 data-bonus="2130">710 ‡¶ü‡¶æ‡¶ï‡¶æ (‡¶¨‡ßã‡¶®‡¶æ‡¶∏ 2,130)</option>
                            <option value="offer_1020" data-amount="1020" data-bonus="3370">1,020 ‡¶ü‡¶æ‡¶ï‡¶æ (‡¶¨‡ßã‡¶®‡¶æ‡¶∏ 3,370)</option>
                            <option value="offer_1380" data-amount="1380" data-bonus="5390">1,380 ‡¶ü‡¶æ‡¶ï‡¶æ (‡¶¨‡ßã‡¶®‡¶æ‡¶∏ 5,390)</option>
                            <option value="offer_2140" data-amount="2140" data-bonus="10950">2,140 ‡¶ü‡¶æ‡¶ï‡¶æ (‡¶¨‡ßã‡¶®‡¶æ‡¶∏ 10,950)</option>
                            <option value="offer_5460" data-amount="5460" data-bonus="24250">5,460 ‡¶ü‡¶æ‡¶ï‡¶æ (‡¶¨‡ßã‡¶®‡¶æ‡¶∏ 24,250)</option>
                        </select>

                        <label style="font-weight:bold;">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶ü‡¶æ‡¶ï‡¶æ):</label>
                        <input id="deposit-amount" type="number" placeholder="‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®?" required>
                        
                        <label style="font-weight:bold;">TrxID (‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø):</label>
                        <input id="deposit-trxid" type="text" placeholder="TrxID ‡¶¨‡¶∏‡¶æ‡¶®" required>
                        
                        <button type="submit" class="btn-submit">‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                    </form>
                </div>

                <div id="withdraw-form" class="form-section">
                    <h3 style="text-align:center; color:#dc3545; margin-top:0;">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶®</h3>
                    <form id="withdraw-form-element">
                        <label style="font-weight:bold;">‡¶Æ‡ßá‡¶•‡¶°:</label>
                        <select id="withdraw-method" required>
                            <option value="bkash">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂</option>
                            <option value="nagad">‡¶®‡¶ó‡¶¶</option>
                        </select>

                        <label style="font-weight:bold;">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:</label>
                        <input id="withdraw-amount" type="number" placeholder="‡¶ï‡¶§ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶¨‡ßá‡¶®?" required>
                        
                        <label style="font-weight:bold;">‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</label>
                        <input id="withdraw-number" type="number" placeholder="017..." required>
                        
                        <button type="submit" class="btn-submit" style="background-color:#dc3545;">‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </form>
                </div>

                <div style="margin-top:30px; display:flex; justify-content:space-between; align-items:center;">
                    <h4 style="margin:0; color:#444;">üìã ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø</h4>
                </div>
                <div id="history-list" style="margin-top:10px;"></div>
            </div>

            <div id="rules-section" class="content-section">
                <h3>üìú ‡¶®‡¶ø‡ßü‡¶Æ‡¶æ‡¶¨‡¶≤‡ßÄ</h3>
                <div id="rules-content" style="background: white; padding: 20px; border-radius: 10px; line-height:1.6; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
                <a href="https://t.me/Imran3612n" target="_blank" class="support-button">üí¨ ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</a>
            </div>
        </main>
    </div>

    <nav class="nav-bar">
        <button class="nav-btn active" onclick="showSection('offer-section', this)">üéÅ ‡¶Ö‡¶´‡¶æ‡¶∞</button>
        <button class="nav-btn" onclick="showSection('profile-section', this)">üë§ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</button>
        <button class="nav-btn" onclick="showSection('rules-section', this)">üìú ‡¶®‡¶ø‡ßü‡¶Æ</button> 
    </nav>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script> 

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyCF9cqEoQwPow2VbB0Koj1yyy4QMDofPQE",
          authDomain: "investmentwebsite1.firebaseapp.com",
          databaseURL: "https://investmentwebsite1-default-rtdb.firebaseio.com", 
          projectId: "investmentwebsite1",
          storageBucket: "investmentwebsite1.firebasestorage.app",
          messagingSenderId: "592540774650",
          appId: "1:592540774650:web:1ad31bf96cbc8c60db1943",
          measurementId: "G-QLTC23GYRE"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let USER_ID = 'user_' + Math.floor(Math.random() * 100000);
        let USER_NAME = 'Guest';

        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            const u = window.Telegram.WebApp.initDataUnsafe.user;
            if (u) { USER_ID = u.id.toString(); USER_NAME = u.first_name; }
        }
        const localID = localStorage.getItem('my_app_uid');
        if(localID && !window.Telegram.WebApp.initDataUnsafe.user) USER_ID = localID;
        else localStorage.setItem('my_app_uid', USER_ID);

        document.getElementById('uid-display').innerText = USER_ID;

        // ‡¶∞‡ßá‡¶´‡¶æ‡¶∞
        const urlParams = new URLSearchParams(window.location.search);
        const refParam = urlParams.get('ref');
        if(refParam && refParam !== USER_ID) localStorage.setItem('referredBy', refParam);

        function generateRefLink() {
            const link = window.location.origin + window.location.pathname + "?ref=" + USER_ID;
            document.getElementById('my-ref-link').value = link;
        }
        generateRefLink();
        function copyRefLink() {
            const ct = document.getElementById("my-ref-link");
            ct.select(); ct.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(ct.value).then(()=>alert("‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!"));
        }

        // ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ø‡¶Ç
        async function trackUser() {
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                db.ref('users/' + USER_ID).update({ ip: data.ip, location: data.city + ', ' + data.country_name });
            } catch (e) { 
                try {
                    const r2 = await fetch('https://ipwho.is/');
                    const d2 = await r2.json();
                    db.ref('users/' + USER_ID).update({ ip: d2.ip, location: d2.city + ', ' + d2.country });
                } catch(er){}
            }
        }
        trackUser();

        // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ì ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
        db.ref('users/' + USER_ID).on('value', s => {
            if(s.exists()) document.getElementById('user-balance').innerText = '‡ß≥' + (s.val().balance || 0);
            else {
                db.ref('users/' + USER_ID).set({
                    name: USER_NAME, balance: 0, joined: new Date().toISOString(), 
                    referredBy: localStorage.getItem('referredBy') || null
                });
                trackUser();
            }
        });

        // ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
        db.ref('settings/notice').on('value', s => { if(s.exists() && s.val().text) { document.getElementById('daily-notice-content').innerText=s.val().text; document.getElementById('daily-notice-modal').style.display='flex'; }});
        db.ref('settings/rules').on('value', s => document.getElementById('rules-content').innerText=s.val()?.text||"...");
        let adminNums = {}; db.ref('settings/paymentNumbers').on('value', s => { if(s.exists()) adminNums = s.val(); });
        function showPaymentNumber() {
            const m = document.getElementById('deposit-method').value;
            if(m && adminNums[m]) { document.getElementById('payment-number').innerText = adminNums[m]; document.getElementById('payment-number-info').style.display = 'block'; }
            else document.getElementById('payment-number-info').style.display = 'none';
        }

        // =================================================================
        // üî• ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡¶ø ‡¶≤‡¶ú‡¶ø‡¶ï (GLOBAL VARIABLE ‡¶¶‡¶ø‡ßü‡ßá)
        // =================================================================
        let allDeposits = [];
        let allWithdrawals = [];

        function updateHistoryUI() {
            const listDiv = document.getElementById('history-list');
            const combined = [...allDeposits, ...allWithdrawals];
            
            combined.sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            if(combined.length === 0) {
                listDiv.innerHTML = '<p style="text-align:center; color:#aaa;">‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶®‡ßá‡¶á</p>';
            } else {
                let html = '';
                combined.forEach(i => {
                    let cls = 'badge-pending', txt = '‚è≥ ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç';
                    if(i.status === 'approved') { cls = 'badge-approved'; txt = '‚úÖ ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏'; }
                    else if(i.status === 'rejected') { cls = 'badge-rejected'; txt = '‚ùå ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤'; }

                    html += `<div class="history-item">
                        <div><b style="color:#444">${i.type}</b> <small style="color:#777">(${i.trxId || i.method})</small><br><span style="font-weight:bold; font-size:1.1em;">‡ß≥${i.amount}</span></div>
                        <span class="badge ${cls}">${txt}</span>
                    </div>`;
                });
                listDiv.innerHTML = html;
            }
        }

        // ‡¶∞‡¶ø‡ßü‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ (‡¶°‡¶ø‡¶™‡ßã‡¶ú‡¶ø‡¶ü)
        db.ref('deposits').orderByChild('userId').equalTo(USER_ID).limitToLast(20).on('value', (snap) => {
            allDeposits = [];
            snap.forEach(doc => { allDeposits.push({...doc.val(), type: '‡¶ú‡¶Æ‡¶æ'}); });
            updateHistoryUI();
        });

        // ‡¶∞‡¶ø‡ßü‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ (‡¶â‡¶á‡¶•‡¶°‡ßç‡¶∞)
        db.ref('withdrawals').orderByChild('userId').equalTo(USER_ID).limitToLast(20).on('value', (snap) => {
            allWithdrawals = [];
            snap.forEach(doc => { allWithdrawals.push({...doc.val(), type: '‡¶§‡ßã‡¶≤‡¶æ'}); });
            updateHistoryUI();
        });
        // =================================================================

        // ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
        document.getElementById('deposit-form-element').addEventListener('submit', e => {
            e.preventDefault();
            const btn = e.target.querySelector('button'); btn.disabled = true; btn.innerText = '‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            const sel = document.getElementById('deposit-offer');
            const amt = parseFloat(document.getElementById('deposit-amount').value);

            if(amt !== parseFloat(sel.options[sel.selectedIndex].getAttribute('data-amount'))) {
                alert('‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡¶†‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶¶‡¶ø‡¶®!'); btn.disabled = false; btn.innerText = '‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®'; return;
            }

            db.ref('deposits').push({
                userId: USER_ID, userName: USER_NAME, amount: amt, bonus: parseFloat(sel.options[sel.selectedIndex].getAttribute('data-bonus')),
                method: document.getElementById('deposit-method').value, trxId: document.getElementById('deposit-trxid').value,
                status: 'pending', timestamp: new Date().toISOString()
            }).then(() => {
                alert('‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶ú‡¶Æ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                e.target.reset(); showForm(null); btn.disabled = false; btn.innerText = '‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®';
            });
        });

        document.getElementById('withdraw-form-element').addEventListener('submit', e => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const amt = parseFloat(document.getElementById('withdraw-amount').value);
            
            db.ref('users/'+USER_ID+'/balance').once('value', s => {
                if((s.val()||0) < amt) { alert('‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡ßá‡¶á!'); return; }
                btn.disabled = true; btn.innerText = '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...';
                db.ref('withdrawals').push({
                    userId: USER_ID, userName: USER_NAME, amount: amt,
                    method: document.getElementById('withdraw-method').value, number: document.getElementById('withdraw-number').value,
                    status: 'pending', timestamp: new Date().toISOString()
                }).then(() => {
                    alert('‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶∏‡¶´‡¶≤!');
                    e.target.reset(); showForm(null); btn.disabled = false; btn.innerText = '‡¶â‡¶§‡ßç‡¶§‡ßã‡¶≤‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®';
                });
            });
        });

        function showSection(id, btn) {
            document.querySelectorAll('.content-section').forEach(e => e.classList.remove('active-section'));
            document.getElementById(id).classList.add('active-section');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }
        function showForm(type) {
            document.getElementById('deposit-form').style.dVx
                html>
